const mongoose=require("mongoose"),bcrypt=require("bcrypt");let movieSchema=mongoose.Schema({title:{type:String,required:!0},description:{type:String,required:!0},genre:{type:mongoose.Schema.Types.ObjectId,ref:"genre",required:!0},director:{type:mongoose.Schema.Types.ObjectId,ref:"director",required:!0},imagePath:String}),userSchema=mongoose.Schema({username:{type:String,required:!0},password:{type:String,required:!0},email:{type:String,required:!0},birthday:{type:mongoose.Schema.Types.Date},favourites:[{type:mongoose.Schema.Types.ObjectId,ref:"movie"}]});userSchema.statics.hashPassword=password=>bcrypt.hashSync(password,10),userSchema.methods.validatePassword=function(password){return bcrypt.compareSync(password,this.password)};let genreSchema=mongoose.Schema({name:{type:String,required:!0},description:{type:String,required:!0}}),directorSchema=mongoose.Schema({name:{type:String,required:!0},birthday:{type:mongoose.Schema.Types.Date,required:!0},deathday:{type:mongoose.Schema.Types.Date},biography:{type:String,required:!0}}),movie=mongoose.model("movie",movieSchema),user=mongoose.model("user",userSchema),genre=mongoose.model("genre",genreSchema),director=mongoose.model("director",directorSchema);module.exports.movie=movie,module.exports.user=user,module.exports.genre=genre,module.exports.director=director;